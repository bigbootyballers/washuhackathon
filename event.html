<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="navbar.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
          integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
          crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
            integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
            crossorigin=""></script>
    <script src="http://unpkg.com/leaflet@latest/dist/leaflet.js"></script>
    <script src="leaflet-providers.js"></script>
    <style type="text/css">
        #map {
            width: 100%;
            height: 879px;
        }
    </style>
    <script type="text/javascript">
        function myFunction() {
            const myJSONString = JSON.stringify(polyPoints);
            alert(myJSONString);
        }
    </script>   
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="event.html">Map</a></li>
            <button onclick="myFunction()"> Press to export path.</button>
        </ul>
    </nav>
    <div id="map"></div>
    <script>
        var map = L.map('map', {
            center: [38.6488, -90.3108],
            zoom: 15
        });
        var tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        tiles.addTo(map);
        /*
        var satelitte = L.tileLayer.provider('Esri.WorldImagery');
        satelitte.addTo(map);
        var baseLayers = {
            "Tiles": tiles;
            "Satellite": satelitte;
        };

        L.control.layers(baseLayers).addTo(map);
        */
        var polyPoints = [];

        map.on('click', function (e) {

            var marker = new L.marker(e.latlng).addTo(map);
            /*marker.bindPopup("Location: " + e.latlng.lat + ", " + e.latlng.lng).openPopup();*/
            polyPoints.push([e.latlng.lat, e.latlng.lng]);
            var polyLine = L.polyline(polyPoints).addTo(map).openOn(map);
        });
    </script>
</body>
</html>
